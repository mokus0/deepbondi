#
#  <environment>
#    Copyright 2007 James Cook - All Rights Reserved.
#
#  Originally based on MIT Project Athena's TCSH scripts, circa 1990.
#  These have long since taken on a life of their own.
#

export ENV_SET=yes

# default pager
export PAGER=less

# default character set
export LANG=en_US.UTF-8

# preload CVSROOT with deepbondi's main repo, and make cvs use ssh
export CVSROOT=:ext:archive.deepbondi.net:/archive/cvs
export CVS_RSH=ssh

# files created are -rw-r--r-- by default
umask 022

# colorls settings
export LSCOLORS="GxFxCxDxBxEgEdabagacad"
export CLICOLOR=yes

# set up some useful environment variables that are 
# hard to get right in a portable way
export os=`uname`
arch=`uname -p`
if echo $arch | grep -q ' ' ; then
	arch=`uname -m`
fi
export arch

# create a "which"-like function, because 'which -s' isn't available
# everywhere, and the redirects are annoying
function cmdExists {
	which "$@" > /dev/null 2>&1
}

# configure darcs ssh id, if suitable things exist
if [ -f ~/.ssh/darcs-id ]; then
	export DARCS_SSH="ssh -i ~/.ssh/darcs-id"
fi

# enable darcs-client, if installed
darcsclient=darcs-client."$os"."$arch"
if which -s "$darcsclient"; then
	export DARCS_APPLY_HTTP="$darcsclient apply"
	export DARCS_APPLY_DARCS="$darcsclient apply"
	export DARCS_GET_DARCS="$darcsclient get"
	export DARCS_MGET_DARCS="$darcsclient mget"
fi

#
# Read user's environment
#
if [ -r "${user_bash_initdir}/environment" ]; then
	source "${user_bash_initdir}/environment"
fi
